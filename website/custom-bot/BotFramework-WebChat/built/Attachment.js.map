{"version":3,"file":"Attachment.js","sourceRoot":"","sources":["../src/Attachment.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as CardBuilder from './CardBuilder';\nimport { HorizontalAlignment, IAdaptiveCard, TextSize, TextWeight } from 'adaptivecards';\nimport { Attachment, CardAction, CardImage, KnownMedia, UnknownMedia } from 'botframework-directlinejs';\nimport { renderIfNonempty, IDoCardAction } from './Chat';\nimport { FormatState } from './Store';\nimport { default as AdaptiveCardContainer } from './AdaptiveCardContainer';\nimport * as konsole from './Konsole';\n\nconst regExpCard = /\\^application\\/vnd\\.microsoft\\.card\\./i;\n\nconst YOUTUBE_DOMAIN = \"youtube.com\";\nconst YOUTUBE_WWW_DOMAIN = \"www.youtube.com\";\nconst YOUTUBE_SHORT_DOMAIN = \"youtu.be\";\nconst YOUTUBE_WWW_SHORT_DOMAIN = \"www.youtu.be\";\nconst VIMEO_DOMAIN = \"vimeo.com\";\nconst VIMEO_WWW_DOMAIN = \"www.vimeo.com\";\n\nexport interface QueryParams {\n    [propName: string]: string;\n}\n\nexport const queryParams = (src: string) =>\n    src\n    .substr(1)\n    .split('&')\n    .reduce((previous, current) => {\n        const keyValue = current.split('=');\n        previous[decodeURIComponent(keyValue[0])] = decodeURIComponent(keyValue[1]);\n        return previous;\n    }, {} as QueryParams);\n\nconst queryString = (query: QueryParams) =>\n    Object.keys(query)\n    .map(key => encodeURIComponent(key) + '=' + encodeURIComponent(query[key].toString()))\n    .join('&');\n\nconst exists = (value: any) => value != null && typeof value != \"undefined\";\n\nconst Youtube = (props: {\n    embedId: string,\n    autoPlay?: boolean,\n    loop?: boolean\n}) =>\n    <iframe\n        src={ `https://${YOUTUBE_DOMAIN}/embed/${props.embedId}?${queryString({\n            modestbranding: '1',\n            loop: props.loop ? '1' : '0',\n            autoplay: props.autoPlay ? '1' : '0'\n        })}` }\n    />;\n\nconst Vimeo = (props: {\n    embedId: string,\n    autoPlay?: boolean,\n    loop?: boolean\n}) =>\n    <iframe\n        src={ `https://player.${VIMEO_DOMAIN}/video/${props.embedId}?${queryString({\n            title: '0',\n            byline: '0',\n            portrait: '0',\n            badge: '0',\n            autoplay: props.autoPlay ? '1' : '0',\n            loop: props.loop ? '1' : '0'\n        })}` }\n    />;\n\ninterface VideoProps {\n    src: string,\n    poster?: string,\n    autoPlay?: boolean,\n    loop?: boolean,\n    onLoad?: () => void,\n    onClick?: (e: React.MouseEvent<HTMLElement>) => void\n}\n\nconst Video = (props: VideoProps) => {\n    const url = document.createElement('a');\n    url.href = props.src;\n    const urlQueryParams = queryParams(url.search);\n    const pathSegments = url.pathname.substr(1).split('/');\n    switch (url.hostname) {\n        case YOUTUBE_DOMAIN:\n        case YOUTUBE_SHORT_DOMAIN:\n        case YOUTUBE_WWW_DOMAIN:\n        case YOUTUBE_WWW_SHORT_DOMAIN:\n            return <Youtube\n                embedId={ url.hostname === YOUTUBE_DOMAIN || url.hostname === YOUTUBE_WWW_DOMAIN ? urlQueryParams['v'] : pathSegments[pathSegments.length-1] }\n                autoPlay={ props.autoPlay }\n                loop={ props.loop }\n            />;\n\n        case VIMEO_WWW_DOMAIN:\n        case VIMEO_DOMAIN:\n            return <Vimeo\n                embedId={ pathSegments[pathSegments.length-1] }\n                autoPlay={ props.autoPlay }\n                loop={ props.loop }\n            />\n\n        default:\n            return <video controls { ... props } />\n    }\n}\n\nconst Media = (props: {\n    src: string,\n    type?: 'image' | 'video' | 'audio',   // defaults to 'image'\n    poster?: string,\n    autoPlay?: boolean,\n    loop?: boolean,\n    alt?: string,\n    onLoad?: () => void,\n    onClick?: (e: React.MouseEvent<HTMLElement>) => void\n}) => {\n    switch (props.type) {\n        case 'video':\n            return <Video { ...props as VideoProps }  />\n        case 'audio':\n            return <audio controls { ... props } />;\n        default:\n            return <img { ... props } />;\n    }\n}\n\nconst Unknown = (props: {\n    format: FormatState,\n    contentType: string,\n    contentUrl: string,\n    name: string\n}) => {\n    if (regExpCard.test(props.contentType)) {\n        return <span>{ props.format.strings.unknownCard.replace('%1', props.contentType) }</span>;\n    } else if (props.contentUrl) {\n        return <div><a className=\"wc-link-download\" href={ props.contentUrl } target=\"_blank\" title={ props.contentUrl }><div className=\"wc-text-download\">{ props.name || props.format.strings.unknownFile.replace('%1', props.contentType) }</div><div className=\"wc-icon-download\"></div></a></div>;\n    } else {\n        return <span>{ props.format.strings.unknownFile.replace('%1', props.contentType) }</span>;\n    }\n}\n\nconst mediaType = (url: string) =>\n    url.slice((url.lastIndexOf(\".\") - 1 >>> 0) + 2).toLowerCase() == 'gif' ? 'image' : 'video';\n\nexport const AttachmentView = (props: {\n    format: FormatState;\n    attachment: Attachment,\n    onCardAction: IDoCardAction,\n    onImageLoad: () => void\n}) => {\n    if (!props.attachment) return;\n    const attachment = props.attachment as KnownMedia;\n    const onCardAction = (cardAction: CardAction) => cardAction &&\n        ((e: React.MouseEvent<HTMLElement>) => {\n            props.onCardAction(cardAction.type, cardAction.value);\n            e.stopPropagation();\n        });\n    const attachedImage = (\n        images: CardImage[]\n    ) => images && images.length > 0 &&\n        <Media src={ images[0].url } onLoad={ props.onImageLoad } onClick={ onCardAction(images[0].tap) } alt={ images[0].alt } />;\n    const getRichCardContentMedia = (\n        type: 'image' | 'video' | 'audio' | { (url: string): 'image' | 'video' | 'audio' },\n        content: {\n            title?: string;\n            subtitle?: string;\n            text?: string;\n            media?: {\n                url: string;\n                profile?: string;\n            }[];\n            buttons?: CardAction[];\n            image?: {\n                url: string;\n                alt?: string;\n            };\n            autoloop?: boolean;\n            autostart?: boolean;\n        }\n    ) => {\n        if (!content.media || content.media.length === 0) {\n            return null;\n        }\n        // rendering every media in the media array. Validates every type as image, video, audio or a function that returns those values.\n        return content.media.map((md, i) => {\n            let t = (typeof type === 'string')? type : type(md.url);\n            return <Media\n                type={ t }\n                src={ md.url }\n                onLoad={ props.onImageLoad }\n                poster={ content.image && content.image.url }\n                autoPlay={ content.autostart }\n                loop={ content.autoloop }\n                key={ i } />\n        });\n    };\n    switch (attachment.contentType) {\n        case \"application/vnd.microsoft.card.hero\":\n            if (!attachment.content)\n                return null;\n            const heroCardBuilder = new CardBuilder.AdaptiveCardBuilder();\n            if (attachment.content.images) {\n                attachment.content.images.forEach(img => heroCardBuilder.addImage(img.url, null, img.tap));\n            }\n            heroCardBuilder.addCommon(attachment.content)\n            return (\n                <AdaptiveCardContainer className=\"hero\" nativeCard={ heroCardBuilder.card } onImageLoad={ props.onImageLoad } onCardAction={ props.onCardAction } onClick={ onCardAction(attachment.content.tap) } />\n            );\n\n        case \"application/vnd.microsoft.card.thumbnail\":\n            if (!attachment.content)\n                return null;\n            const thumbnailCardBuilder = new CardBuilder.AdaptiveCardBuilder();\n            if (attachment.content.images && attachment.content.images.length > 0) {\n                const columns = thumbnailCardBuilder.addColumnSet([75, 25]);\n                thumbnailCardBuilder.addTextBlock(attachment.content.title, { size: TextSize.Medium, weight: TextWeight.Bolder }, columns[0]);\n                thumbnailCardBuilder.addTextBlock(attachment.content.subtitle, { isSubtle: true, wrap: true }, columns[0]);\n                thumbnailCardBuilder.addImage(attachment.content.images[0].url, columns[1], attachment.content.images[0].tap);\n                thumbnailCardBuilder.addTextBlock(attachment.content.text, { wrap: true });\n                thumbnailCardBuilder.addButtons(attachment.content.buttons);\n            } else {\n                thumbnailCardBuilder.addCommon(attachment.content);\n            }\n            return (\n                <AdaptiveCardContainer className=\"thumbnail\" nativeCard={ thumbnailCardBuilder.card } onImageLoad={ props.onImageLoad } onCardAction={ props.onCardAction } onClick={ onCardAction(attachment.content.tap) } />\n            );\n\n        case \"application/vnd.microsoft.card.video\":\n            if (!attachment.content || !attachment.content.media || attachment.content.media.length === 0)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"video\" nativeCard={ CardBuilder.buildCommonCard(attachment.content) } onCardAction={ props.onCardAction } >\n                    {getRichCardContentMedia('video', attachment.content)}\n                </AdaptiveCardContainer>\n            );\n\n        case \"application/vnd.microsoft.card.animation\":\n            if (!attachment.content || !attachment.content.media || attachment.content.media.length === 0)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"animation\" nativeCard={ CardBuilder.buildCommonCard(attachment.content) } onCardAction={ props.onCardAction } >\n                    {getRichCardContentMedia(mediaType, attachment.content)}\n                </AdaptiveCardContainer>\n            );\n\n        case \"application/vnd.microsoft.card.audio\":\n            if (!attachment.content || !attachment.content.media || attachment.content.media.length === 0)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"audio\" nativeCard={CardBuilder.buildCommonCard(attachment.content)} onCardAction={props.onCardAction} >\n                    {getRichCardContentMedia('audio', attachment.content)}\n                </AdaptiveCardContainer>\n            );\n\n        case \"application/vnd.microsoft.card.signin\":\n            if (!attachment.content)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"signin\" nativeCard={ CardBuilder.buildCommonCard(attachment.content) } onCardAction={ props.onCardAction } />\n            );\n\n        case \"application/vnd.microsoft.card.oauth\":\n            if (!attachment.content)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"signin\" nativeCard={ CardBuilder.buildOAuthCard(attachment.content) } onCardAction={ props.onCardAction } />\n            );\n\n        case \"application/vnd.microsoft.card.receipt\":\n            if (!attachment.content)\n                return null;\n            const receiptCardBuilder = new CardBuilder.AdaptiveCardBuilder();\n            receiptCardBuilder.addTextBlock(attachment.content.title, { size: TextSize.Medium, weight: TextWeight.Bolder });\n            const columns = receiptCardBuilder.addColumnSet([75, 25]);\n            attachment.content.facts && attachment.content.facts.map((fact, i) => {\n                receiptCardBuilder.addTextBlock(fact.key, { size: TextSize.Medium }, columns[0]);\n                receiptCardBuilder.addTextBlock(fact.value, { size: TextSize.Medium, horizontalAlignment: HorizontalAlignment.Right }, columns[1]);\n            });\n            attachment.content.items && attachment.content.items.map((item, i) => {\n                if (item.image) {\n                    const columns2 = receiptCardBuilder.addColumnSet([15, 75, 10]);\n                    receiptCardBuilder.addImage(item.image.url, columns2[0], item.image.tap);\n                    receiptCardBuilder.addTextBlock(item.title, { size: TextSize.Medium, weight: TextWeight.Bolder, wrap: true }, columns2[1]);\n                    receiptCardBuilder.addTextBlock(item.subtitle, { size: TextSize.Medium, wrap: true }, columns2[1]);\n                    receiptCardBuilder.addTextBlock(item.price, { horizontalAlignment: HorizontalAlignment.Right }, columns2[2]);\n                } else {\n                    const columns3 = receiptCardBuilder.addColumnSet([75, 25]);\n                    receiptCardBuilder.addTextBlock(item.title, { size: TextSize.Medium, weight: TextWeight.Bolder, wrap: true }, columns3[0]);\n                    receiptCardBuilder.addTextBlock(item.subtitle, { size: TextSize.Medium, wrap: true }, columns3[0]);\n                    receiptCardBuilder.addTextBlock(item.price, { horizontalAlignment: HorizontalAlignment.Right }, columns3[1]);\n                }\n            });\n            if (exists(attachment.content.vat)) {\n                const vatCol = receiptCardBuilder.addColumnSet([75, 25]);\n                receiptCardBuilder.addTextBlock(props.format.strings.receiptVat, { size: TextSize.Medium, weight: TextWeight.Bolder }, vatCol[0]);\n                receiptCardBuilder.addTextBlock(attachment.content.vat, { horizontalAlignment: HorizontalAlignment.Right }, vatCol[1]);\n            }\n            if (exists(attachment.content.tax)) {\n                const taxCol = receiptCardBuilder.addColumnSet([75, 25]);\n                receiptCardBuilder.addTextBlock(props.format.strings.receiptTax, { size: TextSize.Medium, weight: TextWeight.Bolder }, taxCol[0]);\n                receiptCardBuilder.addTextBlock(attachment.content.tax, { horizontalAlignment: HorizontalAlignment.Right }, taxCol[1]);\n            }\n            if (exists(attachment.content.total)) {\n                const totalCol = receiptCardBuilder.addColumnSet([75, 25]);\n                receiptCardBuilder.addTextBlock(props.format.strings.receiptTotal, { size: TextSize.Medium, weight: TextWeight.Bolder }, totalCol[0]);\n                receiptCardBuilder.addTextBlock(attachment.content.total, { horizontalAlignment: HorizontalAlignment.Right, size: TextSize.Medium, weight: TextWeight.Bolder }, totalCol[1]);\n            }\n            receiptCardBuilder.addButtons(attachment.content.buttons);\n            return (\n                <AdaptiveCardContainer className='receipt' nativeCard={ receiptCardBuilder.card } onCardAction={ props.onCardAction } onClick={ onCardAction(attachment.content.tap) } />\n            );\n\n        case \"application/vnd.microsoft.card.adaptive\":\n            if (!attachment.content)\n                return null;\n            return (\n                <AdaptiveCardContainer jsonCard={ attachment.content as IAdaptiveCard } onImageLoad={ props.onImageLoad } onCardAction={ props.onCardAction } />\n            );\n\n        // Deprecated format for Skype channels. For testing legacy bots in Emulator only.\n        case \"application/vnd.microsoft.card.flex\":\n            if (!attachment.content)\n                return null;\n            return (\n                <AdaptiveCardContainer className=\"flex\" nativeCard={ CardBuilder.buildCommonCard(attachment.content) } onCardAction={ props.onCardAction } >\n                    { attachedImage(attachment.content.images) }\n                </AdaptiveCardContainer>\n            );\n\n        case \"image/svg+xml\":\n        case \"image/png\":\n        case \"image/jpg\":\n        case \"image/jpeg\":\n        case \"image/gif\":\n            return <Media src={ attachment.contentUrl } onLoad={ props.onImageLoad } />;\n\n        case \"audio/mpeg\":\n        case \"audio/mp4\":\n            return <Media type='audio' src={ attachment.contentUrl } />;\n\n        case \"video/mp4\":\n            return <Media type='video' poster={ attachment.thumbnailUrl } src={ attachment.contentUrl } onLoad={ props.onImageLoad } />;\n\n        default:\n            var unknownAttachment = props.attachment as UnknownMedia;\n            return <Unknown format={ props.format } contentType={ unknownAttachment.contentType } contentUrl={ unknownAttachment.contentUrl } name={ unknownAttachment.name } />;\n    }\n}\n"]}